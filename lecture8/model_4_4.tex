\begin{tikzpicture}[auto]

%
% Styles
%
\tikzstyle{state} = [rectangle,draw=oproverblue!60,fill=oproverblue!20,thick]
\tikzstyle{initialstate} = [rectangle,draw=mydarkgreen!80,fill=mydarkgreen!40,thick]
\tikzstyle{badstate} = [rectangle,draw=red!60,fill=red!20,thick]
\tikzstyle{tran}  = [->,>=stealth,semithick]

\draw[fill=oproverblue!10,dashed] (0, 0) to [out=180,in=90] (-6,-2) 
                                         to [out=-90,in=180]( -1.75,-5)
                                         to [out=-90,in=180] (  -0.5,-6.9)
                                         to [out=0,in=180] (   0.5,-6.9)
                                         to [out=0,in=-90]   (  1.75,-5)
                                         to [out=0,in=-90]  ( 6,-2)
                                         to [out=90,in=0]   ( 0, 0);

\node[initialstate] (000) at (  0,  -1)  {$\nodd{door=open}{engine=off}{tray=empty}$};
\node[state]        (100) at ( -4,  -2)  {$\nodd{door=closed}{engine=off}{tray=empty}$};
\node[state]        (001) at (  4, -2)   {$\nodd{door=open}{engine=off}{tray=full}$};
\node[state]        (101) at ( -2, -4)  {$\nodd{door=closed}{engine=off}{tray=full}$};
\node[state]        (110) at (  2, -4)  {$\nodd{door=closed}{engine=on}{tray=empty}$};
\node[badstate]     (011) at (  3, -6)  {$\nodd{door=open}{engine=on}{tray=full}$};
\node[state]        (111) at (  0, -6)  {$\nodd{door=closed}{engine=on}{tray=full}$};
\node[badstate]     (010) at ( -3, -6)  {$\nodd{door=open}{engine=on}{tray=empty}$};

\draw[tran] (000) to [out=200,in=0]    node[above] {\scriptsize close\_door}    (100);
\draw[tran] (000) to [out=0,in=180]    node {\scriptsize fill\_tray}            (001);
\draw[tran] (100) to [out=90,in=180]   node {\scriptsize open\_door}            (000);
\draw[tran] (100) to [out=-10,in=135]  node[below] {\scriptsize start\_washing} (110);
\draw[tran] (100) to [out=-90,in=180]  node[left] {\scriptsize fill\_tray}      (101);
\draw[tran] (001) to [out=190,in=20]   node[right] {\scriptsize close\_door}    (101);
\draw[tran] (101) to [out=90,in=-100]   (000);
\draw[tran] (101) to [out=55,in=183]    (001);
\draw[tran] (101) to [out=0,in=180]     (110);
\draw[tran] (110) to [out=95,in=-90]    (000);
\draw[tran] (110) to [out=-100,in=75]    (111);
%\draw[tran] (111) to [out=190,in=20]   node[right] {\scriptsize close\_door}    (001);

\end{tikzpicture}
