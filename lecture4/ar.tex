\subsection{Lazy Approach as Abstraction Refinement}

\begin{frame}
  \frametitle{Abstraction}
  Assigment relations
  \vfill
  \begin{center}
  \begin{tabular}{ccc}

    \begin{minipage}{.2\textwidth}

    $\babst{\varphi}$ \\
    \\
    \\
    \\
    \\
    \\
    $\varphi$ 

    \end{minipage}

    &

    \begin{minipage}{.55\textwidth}
      \begin{overlayarea}{\textwidth}{5cm}
	\only<1-3|handout:0>{\scalebox{.4}{\input{assignments_1.pdf_t}}}
	\only<4|handout:0>{\scalebox{.4}{\input{assignments_2.pdf_t}}}
	\only<5|handout:0>{\scalebox{.4}{\input{assignments_3.pdf_t}}}
	\only<6|handout:0>{\scalebox{.4}{\input{assignments_4.pdf_t}}}
	\only<7>{\scalebox{.4}{\input{assignments_5.pdf_t}}}
      \end{overlayarea}
    \end{minipage}

    &

    \begin{minipage}{.3\textwidth}

    \onslide<3->{$2^n$} \\
    \onslide<3->{($n = |\{ a_i \}|$)}\\
    \\
    \\
    \\
    \onslide<2->{$\infty$} \\ 
    \onslide<2->(can be) 

    \end{minipage}

  \end{tabular}
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{Abstraction}
  Model relations
  \begin{itemize}
    \item<2-> if $\mu$ is a model for $\varphi$, then $\babst{\mu}$ is a model for $\babst{\varphi}$
    \item<3-> if $\babst{\mu}$ is not a model for $\babst{\varphi}$, then there is no $\mu$ that is a model for $\varphi$
    \item<4-> there may be some model $\babst{\mu}$ for $\babst{\varphi}$ that does not map to any model 
	      $\mu$ for $\varphi$
  \end{itemize}
  \vfill
  \begin{center}
  \begin{tabular}{cc}

    \begin{minipage}{.2\textwidth}

    $\babst{\varphi}$ \\
    \\
    \\
    \\
    \\
    \\
    $\varphi$ 

    \end{minipage}

    &

    \begin{minipage}{.7\textwidth}
      \begin{overlayarea}{\textwidth}{5cm}
	\only<1|handout:0>{\scalebox{.4}{\input{models_1.pdf_t}}}
	\only<2|handout:0>{\scalebox{.4}{\input{models_2.pdf_t}}}
	\only<3|handout:0>{\scalebox{.4}{\input{models_3.pdf_t}}}
	\only<4>{\scalebox{.4}{\input{models_4.pdf_t}}}
      \end{overlayarea}
    \end{minipage}

  \end{tabular}
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{Abstraction Refinement}

  \scriptsize

  Notice that
  \begin{itemize}
    \item Assignments $\mu$ of $\varphi$ are many (potentially $\infty$),
          infeasible to check if any of them is a model {\bf systematically}
    \item Models $\babst{\mu}$ of $\babst{\varphi}$ are finite in number,
          and easy to enumerate with a SAT-solver
    \item A model $\babst{\mu}$ is nothing but a {\bf conjunction of \tatoms},
          can be checked efficiently with a \tsolver
  \end{itemize}
  \vfill
  \pause
  These observations suggest us a methodology
  to tackle the SMT(\T) problem
  \begin{itemize}
    \item Enumerate a Boolean model $\babst{\mu}$ of $\babst{\varphi}$ (abstraction). If no model 
	  exist we are done ($\varphi$ is unsatisfiable) \pause
    \item Check if $\babst{\mu}$ is satisfiable using the \tsolver. If so $\babst{\mu}$ can be extended 
          to a model $\mu$ of $\varphi$, and so we are done ! ($\varphi$ is satisfiable) \pause
    \item It not, we tell the SAT-solver not to enumerate $\babst{\mu}$ again,
          thus {\bf cutting away systematically an infinite number} 
	  of assignments for $\varphi$ (refinement) \pause
    \item It can be blocked by adding a clause $\neg \babst{\mu}$. Go up \pause
    \item It terminates because there are finite Boolean models
  \end{itemize}

\end{frame}

\begin{frame}
  \frametitle{Abstraction Refinement}

  \scriptsize
  
  The lazy approach falls into the so-called {\bf abstraction-refinement} 
  paradigm
  \vfill
  \begin{center}
  \scalebox{.5}{\input{ar.pdf_t}}
  \end{center}

\end{frame}
